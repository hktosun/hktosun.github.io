getwd()
data = read_dta("stata_rust_data.dta")
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
View(Data)
View(data)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
?cut
u <- apply(data, 6, cut, c(-Inf,seq(0, 450000, 5000), Inf), labels=0:90)
View(data)
u <- apply(data, 6, cut, c(seq(0, 450000, 5000)), labels=0:90)
data = read_dta("stata_rust_data.dta")
names(data)
cut(data$v6, seq(0,450000,5000), labels = 1:90)
u <- apply(data, 6, cut, c(seq(0.00, 450000, 5000)), labels=0:90)
u <- apply(data, 6, cut, c(seq(0, 450000, 5000)), labels=0:90)
cut(data$v6, seq(0,450000,5000), labels = 1:90)
cut(data$v6, seq(0.0,450000,5000), labels = 1:90)
cut(data$v6, seq(-0.00001,450000,5000), labels = 1:90)
cut(data$v6, c(-Inf,seq(0,450000,5000)), labels = 0:90)
cut(data$v6, seq(0,450000,5000), labels = 0:90,include.lowest = TRUE)
cut(data$v6, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE)
data %>% cut(v6, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE)
source('~/.active-rstudio-document')
data$xt-1 = cut(data$xt-1, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
data
source('~/.active-rstudio-document')
data2
data <- data %>% mutate(xtchange = xt - xt1)
data$xt1 <- as.numeric(cut(data$xt1, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$xt1 <- as.vector(cut(data$xt1, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$xt1 <- (cut(data$xt1, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
data
data2
source('~/.active-rstudio-document')
data
as.numeric("0")
data$xtmxt1 <- as.numeruc(data$xtmx1)
data$xtmxt1 <- as.numeric(data$xtmx1)
data$xtmxt1 <- as.numeric(data$xtmxt1)
data
source('~/.active-rstudio-document')
data
source('~/.active-rstudio-document')
data
View(data)
source('~/.active-rstudio-document')
View(data)
source('~/.active-rstudio-document')
probs
data[data$insideg == 3]
data[data$insideg == 3,]
data[data$model == 4339,]
data2[data2$model == 4339,]
source('~/.active-rstudio-document')
probs
source('~/.active-rstudio-document')
probs
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
probs <- data %>% filter(i == 0) %>% group_by(insideg) %>% summarize(m = n()/nrow(data))
probs
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
probs
probs2
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
probs
probs2
data$insideg
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
probs
probs <- data %>% filter(i == 0) %>% group_by(insideg) %>% summarize(m = mean())
probs <- data %>% filter(i == 0) %>% group_by(insideg) %>% summarize(m = n())
probs <- data %>% filter(i == 0) %>% summarize(tot = n()) %>% group_by(insideg) %>% summarize(m = n()/tot)
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
?nrow
c(1,1,2,NA,1)
nrow(c(1,1,2,NA,1))
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
probs2
data2[data2$i==1]
data2[data2$i==1,]
nrow(data2)
nrow(data)
probs2 <- data2 %>% group_by(insideg) %>% summarize(m = n()/nrow2)
probs2
probs2 <- data2 %>% group_by(insideg) %>% summarize(m = n())
probs2
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
probs
probs2
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt1", "xt", "odometer", "xtmxt1")
data2 <- data
data$xt1 <- as.numeric(cut(data$xt1, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$xt <- as.numeric(cut(data$xt, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data <- data %>% mutate(xtchange = ((xt- xt1)<=2)*(xt-xt1)  + ((xt-xt1)>2)*2 )
data[data$i==1,]
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
probs2
probs
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
probs2
probs
data$my.PL8.lag <- c(data$xt[-1], NA)
data$mypl <- c(data$xt[-1], NA)
View(data)
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt1", "xt", "odometer", "xtmxt1")
data2 <- data
data$mypl <- c(data$xt[-1], NA)
View(data)
View(data)
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
probs2
probs
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
nrow2 <- nrow(data2)
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
data <- data %>% mutate(xtchange = ((mypl- xt)<=2)* (mypl-xt)  + ((mypl-xt)>2)*2 )
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt1", "xt", "odometer", "xtmxt1")
data2 <- data
data$mypl <- c(data$xt[-1], NA)
View(data)
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt1", "xt", "odometer", "xtmxt1")
data2 <- data
data$mypl <- c(data$xt[-1], NA)
data$bxt1 <- as.numeric(cut(data$xt1, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxt <- as.numeric(cut(data$xt, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bmypl <- as.numeric(cut(data$mypl, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
View(data)
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt1", "xt", "odometer", "xtmxt1")
data2 <- data
data$xtp1 <- c(data$xt[-1], NA)
data$od2 <- c(data$odometer[-1], NA)
data$bxt1 <- as.numeric(cut(data$xt1, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxt <- as.numeric(cut(data$xt, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxtp1 <- as.numeric(cut(data$xtp1, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bod <- as.numeric(cut(data$odometer, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bod2 <- as.numeric(cut(data$od2, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
View(data)
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt1", "xt", "odometer", "xtmxt1")
data2 <- data
data$xtp1 <- c(data$xt[-1], NA)
data$bxt1 <- as.numeric(cut(data$xt1, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxt <- as.numeric(cut(data$xt, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxtp1 <- as.numeric(cut(data$xtp1, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
View(data)
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data2 <- data
data$xtp1 <- c(data$xt[-1], NA)
data$bxt1 <- as.numeric(cut(data$xt, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxt <- as.numeric(cut(data$xt1, seq(0,450000,5000), labels = 1:90,include.lowest = TRUE))
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data2 <- data
data$xtp1 <- c(data$xt[-1], NA)
data$bxt1 <- as.numeric(cut(data$xt, seq(0,450000,5000), labels = 0:89,include.lowest = TRUE))
data$bxt <- as.numeric(cut(data$xt1, seq(0,450000,5000), labels = 0:89,include.lowest = TRUE))
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data2 <- data
data$xtp1 <- c(data$xt[-1], NA)
data$bxt1 <- as.numeric(cut(data$xt, seq(-0.0000001,450000,5000), labels = 0:89,include.lowest = TRUE))
data$bxt <- as.numeric(cut(data$xt1, seq(-0.0000001,450000,5000), labels = 0:89,include.lowest = TRUE))
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data2 <- data
data$xtp1 <- c(data$xt[-1], NA)
data$bxt <- as.numeric(cut(data$xt, seq(-0.0000001,450000,5000), labels = 0:89,include.lowest = TRUE))
data$bxt1 <- as.numeric(cut(data$xt1, seq(-0.0000001,450000,5000), labels = 0:89,include.lowest = TRUE))
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data2 <- data
data$xtp1 <- c(data$xt[-1], NA)
data$bxt <- as.numeric(cut(data$xt, seq(-0.0001,450000,5000), labels = 0:89,include.lowest = TRUE))
data$bxt1 <- as.numeric(cut(data$xt1, seq(-0.001,450000,5000), labels = 0:89,include.lowest = TRUE))
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data2 <- data
data$xtp1 <- c(data$xt[-1], NA)
data$bxt <- cut(data$xt, seq(-0.0001,450000,5000), labels = 0:89,include.lowest = TRUE)
data$bxt1 <- cut(data$xt1, seq(-0.001,450000,5000), labels = 0:89,include.lowest = TRUE)
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data2 <- data
data$xtp1 <- c(data$xt[-1], NA)
data$bxt <- as.numeric(cut(data$xt, seq(-0.0001,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxt1 <- as.numeric(cut(data$xt1, seq(-0.001,450000,5000), labels = 1:90,include.lowest = TRUE))
data <- data %>% mutate(xtchange = (i==0)*(bxt1-bxt) + (i==1)*(bxt1))
View(data)
View(data)
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data2 <- data
data$xtp1 <- c(data$xt[-1], NA)
data$bxt <- as.numeric(cut(data$xt, seq(-0.0001,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxt1 <- as.numeric(cut(data$xt1, seq(-0.001,450000,5000), labels = 1:90,include.lowest = TRUE))
data <- data %>% mutate(xtchange = (i==0)*(bxt1-bxt) + (i==1)*(bxt1))
data <- data %>% mutate(frag = (xtchange<=2)*xtchange + (xtchange >2)*2)
probs <- data %>% group_by(frag) %>% summarize(m = n()/nrow(data))
probs
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R', echo=TRUE)
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
probs
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data2 <- data
data$xtp1 <- c(data$xt[-1], NA)
data$bxt <- as.numeric(cut(data$xt, seq(-0.0001,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxt1 <- as.numeric(cut(data$xt1, seq(-0.001,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxtmxt1 <- as.numeric(cut(data$xtmxt1, c(seq(0,10000,5000),Inf), labels = 1:3,include.lowest = TRUE))
data <- data %>% mutate(xtchange = (i==0)*(bxt1-bxt) + (i==1)*(bxt1-1))
data <- data %>% mutate(frag = (xtchange<=2)*xtchange + (xtchange >2)*2)
probs <- data %>% group_by(frag) %>% summarize(m = n()/nrow(data))
probs2 <- data %>% mutate(frag2 = bxtmxt1 - 1 ) %>% group_by(frag2) %>% summarize(m = n()/nrow(data))
probs
probs2
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data$bxt <- as.numeric(cut(data$xt, seq(-0.0001,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxt1 <- as.numeric(cut(data$xt1, seq(-0.001,450000,5000), labels = 1:90,include.lowest = TRUE))
data <- data %>% mutate(xtchange = (i==0)*(bxt1-bxt) + (i==1)*(bxt1-1))
data <- data %>% mutate(frag = (xtchange<=2)*xtchange + (xtchange >2)*2)
probs <- data %>% group_by(frag) %>% summarize(m = n()/nrow(data))
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R', echo=TRUE)
probs
probs$m[1] + probs$m[2] + probs$m[3]
probs <- as.array(data %>% group_by(frag) %>% summarize(m = n()/nrow(data)))
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
source('~/Documents/GitHub/hktosun.github.io/coursework/IO/ECON8602/hw4.R')
probs
as.numeric(probs$m)
as.array(probs$m)
pi = as.array(probs$m)
pi
?write_csv
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data$bxt <- as.numeric(cut(data$xt, seq(-0.0001,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxt1 <- as.numeric(cut(data$xt1, seq(-0.001,450000,5000), labels = 1:90,include.lowest = TRUE))
data <- data %>% mutate(xtchange = (i==0)*(bxt1-bxt) + (i==1)*(bxt1-1))
data <- data %>% mutate(frag = (xtchange<=2)*xtchange + (xtchange >2)*2)
probs <- data %>% group_by(frag) %>% summarize(m = n()/nrow(data))
pi = as.array(probs$m)
write_csv(data,"rust.csv", colnames = TRUE)
write_csv(data,"rust.csv", col_names = TRUE)
View(data)
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data$bxt <- as.numeric(cut(data$xt, seq(-0.0001,450000,5000), labels = 1:90,include.lowest = TRUE))
data$bxt1 <- as.numeric(cut(data$xt1, seq(-0.001,450000,5000), labels = 1:90,include.lowest = TRUE))
data <- data %>% mutate(xtchange = (i==0)*(bxt1-bxt) + (i==1)*(bxt1-1))
data <- data %>% mutate(frag = (xtchange<=2)*xtchange + (xtchange >2)*2)
probs <- data %>% group_by(frag) %>% summarize(m = n()/nrow(data))
pi = as.array(probs$m)
write_csv(data,"rust.csv", col_names = TRUE)
pdx <- data %>% group_by(xt) %>% summarize(tu = sum(i))
pdx
pdx <- data %>% group_by(xt) %>% summarize(n = n())
pdx
data$xt
pdx <- data %>% group_by(bxt) %>% summarize(n = n())
pdx
pdx <- data %>% group_by(bxt) %>% summarize(n = sum(i==0))
pdx
pdx <- data %>% group_by(bxt) %>% summarize(n = sum(i==0)/n())
pdx
pdx
View(pdx)
max(data$bxt)
sum((data$bxt)==78)
pdf(pdx)
a <- pdf(pdx)
a
a<-epdf(pdx)
library(ks)
a <- kde(pdx)
a
a
kde(pdx)
ggplot(kde)
pdfdata <- data.frame(a$eval.points,a$estimate)
names(pdfdata) = c("wage" , "pdf")
ggplot(pdfdata,aes(wage)) +
geom_line(aes(y = pdf)) +
labs(title = "pdf of log wages in the first spell", x = "Wage", y = "Cumulative density")
pdfdata
a$eval.points
a$estimate
range(90)
range(1:90)
1:90
a <- kde(pdx, eval.points = 1:90)
a <- kde(pdx, eval.points = 1:78)
a <- kde(pdx, eval.points = 1:71)
a <- kde(pdx)
ggplot(pdx,aes(bxt)) +
geom_line(aes(y = n)) +
labs(title = "pdf of log wages in the first spell", x = "Wage", y = "Cumulative density")
ggplot(pdx,aes(bxt)) +
geom_line(aes(y = n)) +
labs(title = "pdf of log wages in the first spell", x = "Wage", y = "Cumulative density")
library("tidyverse")
library("haven")
data <- read_dta("stata_rust_data.dta")
names(data) <- c("model","group", "year", "month", "i","xt", "xt1", "odometer", "xtmxt1")
data
View(data)
